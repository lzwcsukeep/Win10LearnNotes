## C语言指针

涉及指针的定义的实际含义

1. int i ;   // 声明了一个整数
2. int *p;  // * 表示该变量p是一个指针，指向整型变量
3. int a[N];  //声明了一个长度为N的整型数组
4. int  *p[N] ；  // 因为 中括号[] 优先级比 \* 高 ，p和[] 结合 ,该语句声明了一个指针数组，数组元素为指向整型                              数据的指针变量。
5. int (*p)[N]   // 声明了一个指针p,该指针变量p指向含N个元素的一维整型数组
6. int f() ;  //f 为返回整型数的函数
7. int *p() ; // p是一个函数，返回值是整型指针
8. **int (*p) ( );**  //p为指向函数的指针，该函数返回整型数



## 二维数组的数组名含义



指针是保存地址值的变量，也就是说指针也是一个变量，但是指针变量的值是一个地址。

**使用指针要十分注意指针的类型，有时候两个指针指向的地址是相等的，但是指针的类型不一样，这两个指针也就不一样。**

这其中的区别会在指针变量与整数做加减运算时体现出来。

比如：

```c
#include<stdio.h>

int main()
{
    int a[2][3]={{0,1,2},{3,4,5}};
    
    printf("sizeof int = %d\n",sizeof(int));
    
    printf("a = %x, a[0] = %x, &a[0][0] = %x\n",a,a[0],&a[0][0]);
    
    printf("a = %x, a+1 = %x, a[0]+1 = %x\n",a,a+1,a[0]+1);

    return 0 ;
}
```



输出：

```text
sizeof int = 4
a = 61fe00, a[0] = 61fe00, &a[0][0] = 61fe00
a = 61fe00, a+1 = 61fe0c, a[0]+1 = 61fe04 
```

可以看到对二维数组a\[2][3]

数组名a ，a[0] ,&a\[0][0] 的保存的值是一样的，但是对于+1 操作，a+1 增加了12个字节，a[0]增加了4个字节

**原因：**

因为二维数组被看成元素是一维数组的一维数组。而数组名含义是指向数组中第一个元素的指针。

所以数组a\[2][3] 看成是具有两个元素的一维数组，而每个元素本身又是一个一维数组，其中第一个元素a[0] 是一维数组{0,1,2} ,第二个元素a[1] 是一维数组{3,4,5}。

即

- a = { a[0] ,a[1]}
- a[0] = {0,1,2}
- a[1] ={3,4,5}

**数组名a，代表指向第一个元素a[0] 的指针，类型是 int[3]**

**而a[0]也是一个数组，因此数组名a[0]指向它自身的第一个元素a\[0][0] ，类型是 int** 

**因此虽然在值上a == a[0] == &a\[0][0] ,但是 a 和 a[0]的类型是不一样的。这就是它们的区别。**



因此在自定义一个指针指向二维数组a时为

int (*p)[3] = a ;   //注意 *p两侧的括号不能省，省掉含义就变了，参考文章开头

而不是 int *p =a ;

那么 p+1 也就指向了a[1]

也可以用p来访问数组a的元素，如*(p+1)+1 就指向了a\[1][1]

获取其值a\[1][1] = \*(*(p+1)+1)

**通式为a \[ i ] [ j ] = \*(\* ( p + i ) + j ) = \*( \* ( a + i) + j )**



代码验证

```c
#include<stdio.h>

int main()
{
    int a[2][3]={{0,1,2},{3,4,5}};
    
    printf("sizeof int = %d\n",sizeof(int));
    
    printf("a = %x, a[0] = %x, &a[0][0] = %x\n",a,a[0],&a[0][0]);
    
    printf("a = %x, a+1 = %x, a[0]+1 = %x\n",a,a+1,a[0]+1);

    /* 定义指针变量p指向二维数组a ，并用p访问数组a元素*/
    int (*p)[3] = a ;
    printf("a[1][1] = %d, *(*(p+1)+1) = %d\n",a[1][1],*(*(p+1)+1));
    return 0 ;
}
```

输出：

```c
sizeof int = 4
a = 61fe00, a[0] = 61fe00, &a[0][0] = 61fe00
a = 61fe00, a+1 = 61fe0c, a[0]+1 = 61fe04
a[1][1] = 4, *(*(p+1)+1) = 4
```

参考资料：

1. 《C程序设计语言》第二版，英文原版为《The C Programming Language》

2. [哈尔滨工业大学 C语言 全59讲 主讲-苏小红 视频教程](https://www.bilibili.com/video/BV1hx411h73g?spm_id_from=333.999.0.0) 指针与数组部分

