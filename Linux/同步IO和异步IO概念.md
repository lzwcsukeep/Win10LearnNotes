## 异步IO的概念

什么是异步 IO？
异步 IO（Asynchronous I/O，简称 AIO）是一种IO 操作与程序执行 “解耦” 的 IO 模型：当程序发起一个 IO 请求（如读文件、网络通信）后，不需要阻塞等待 IO 完成，可以继续执行后续代码；当 IO 操作后台完成后，系统会通过「回调函数、信号、事件通知」等方式告知程序，程序再处理 IO 结果（如读取数据、处理响应）。
核心特点：非阻塞、回调通知、IO 与计算并行。
关键在你发起IO请求之后，立即执行其他代码，IO完成之后，等待其他人用某种方式通知你IO完成了。

## 异步IO的流程

程序发起异步 IO 的完整流程：

1. 发起异步 IO 请求：程序调用异步 IO 接口（如 Linux 的io_uring、Python 的aiofile），传入 IO 操作参数（如文件路径、缓冲区）和「回调函数 / 事件标识」；
2. IO 操作后台执行：操作系统接收到请求后，将 IO 任务交给硬件（如磁盘控制器、网卡）处理，程序本身不阻塞，继续执行后续代码；
3. IO 完成通知：当硬件完成 IO 操作（如数据读取到缓冲区），操作系统会触发通知（如向程序发送信号、将事件加入事件队列）；
4. 处理 IO 结果：程序接收到通知后，调用预先注册的回调函数，或从事件队列中取出结果，处理 IO 数据（如解析读取的文件内容、处理网络响应）。

## 同步IO的概念

同步 IO 是与异步 IO 相对的IO 模型核心范式：当程序发起一个 IO 操作（如读文件、网络通信、数据库查询）后，必须阻塞等待该 IO 操作完全完成（数据传输结束、结果返回），才能继续执行后续代码。核心特征是「IO 操作与程序执行串行」——IO 未完成时，程序会暂停在 IO 调用处，直到 IO 结果就绪。
**特殊情形：** 同步IO也可以选择不阻塞等待IO,但是返回错误识别信息，这种叫做非阻塞同步IO, 但是也属于同步IO这一类别。关键在于程序主动等待或主动查询IO
是否完成。

二、同步 IO 的核心流程
程序发起同步 IO 的完整步骤（串行执行，无并行）：

1. 发起 IO 请求：程序调用同步 IO 接口（如 C 的read()/write()、Python 的open()读文件、Java 的InputStream.read()）；
2. 程序阻塞：IO 操作执行期间（如磁盘寻道、网络传输数据），程序会暂停在当前 IO 调用行，CPU 不再执行该程序的后续代码（此时线程可能被操作系统挂起，释放 CPU 给其他程序）；
3. IO 完成 + 返回结果：操作系统 / 硬件完成 IO 操作（如数据读取到缓冲区、网络响应接收完毕），将结果返回给程序；
4. 程序恢复执行：阻塞解除，程序从 IO 调用处继续执行后续代码（如处理读取到的数据、发起下一个请求）。

## 非阻塞同步IO

同步 IO 包含「阻塞同步 IO」和「非阻塞同步 IO」，但核心都是「程序主动等待 IO 完成」，仅等待方式不同。

非阻塞IO发起 IO 请求后，程序不阻塞，但需**主动轮询**（循环检查）IO 状态（如`poll()`/`select()`），直到 IO 完成。

| 类型           | 核心逻辑                                                                  | 类比场景                                                   |
| ------------ | --------------------------------------------------------------------- | ------------------------------------------------------ |
| 阻塞同步 IO（最常用） | 发起 IO 请求后，程序直接阻塞，直到 IO 完成才恢复（如`read()`函数默认行为）。                        | 下单后站在柜台前 “原地等待”，不做任何事，直到拿到咖啡。                          |
| 非阻塞同步 IO     | 发起 IO 请求后，程序不阻塞，但需**主动轮询**（循环检查）IO 状态（如`poll()`/`select()`），直到 IO 完成。 | 下单后可以去旁边玩手机，但需要 “每隔 1 分钟主动去柜台问咖啡好了吗”，直到得到 “好了” 的回复才取咖啡 |

### 异步 IO 的关键区别：与 “非阻塞同步 IO” 的不同

很多人会混淆「非阻塞同步 IO」和「异步 IO」，核心差异在于「谁在等待 IO 完成」：

- **异步 IO**：程序发起请求后，完全不用管 IO 状态，由**操作系统 / 内核**在 IO 完成后主动通知（比如店员打电话，你不用主动问），程序只需专注处理自己的逻辑和回调。
- **非阻塞同步 IO**：程序发起 IO 请求后不阻塞，但需要**主动轮询**（如循环调用`poll()`/`select()`）检查 IO 是否完成，本质还是 “程序自己关注 IO 状态”（比如你下单后，每隔 1 分钟去柜台问 “咖啡好了吗”，期间可以做别的，但需要主动查询）；



### 总结

异步IO, 同步IO 就是一些IO 范式的区别。


