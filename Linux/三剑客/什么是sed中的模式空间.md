### 什么是 `sed` 中的模式空间 (`pattern space`)？

在 `sed` 中，**模式空间 (`pattern space`) 是一个临时缓冲区，用于存储当前正在处理的文本行**。`sed` 的所有编辑命令（如替换、删除等）都在模式空间中对该行内容进行操作。

### 工作机制

`sed` 的基本处理流程如下：

1. 从输入文件（或标准输入）读取一行文本到模式空间。
2. 对模式空间中的内容执行指定的命令。
3. 将修改后的模式空间内容（默认情况下）输出到标准输出。
4. 清空模式空间，读取下一行文本，重复上述步骤，直到处理完所有输入行。

### 模式空间的特点

1. **逐行处理**：默认情况下，`sed` 是一行一行地将输入加载到模式空间中进行处理的。
2. **临时性**：模式空间在每次处理完一行并输出后都会被清空，然后读取下一行内容。
3. **可修改**：`sed` 的命令（如 `s`, `d`, `y`, `a`, `c`, `i` 等）都作用于模式空间中的文本。
4. **可扩展**：通过命令如 `N`, `H`, `G`，可以将多行数据或保持空间的内容加载到模式空间中。

### 示例解析

#### 示例 1：基本模式空间操作

```bash
`echo -e "line1\nline2\nline3" | sed 's/line/LINE/'`
```

- **输入：**
  
  ```bash
  line1
  line2
  line3
  ```

- **命令解析：**
  
  - 每次读取一行到模式空间。
  - 在模式空间中，执行 `s/line/LINE/` 将 `line` 替换为 `LINE`。
  - 输出模式空间内容。

- **处理过程：**
  
  1. 读取 `line1` → 模式空间内容为 `line1` → 替换为 `LINE1` → 输出 `LINE1`。
  2. 读取 `line2` → 模式空间内容为 `line2` → 替换为 `LINE2` → 输出 `LINE2`。
  3. 读取 `line3` → 模式空间内容为 `line3` → 替换为 `LINE3` → 输出 `LINE3`。

- **输出：**
  
  ```bash
  LINE1
  LINE2
  LINE3
  ```

附注：当读取line1时使用`N`命令读取了第二行line2进去模式空间之后，下一次是从第三行开始。
